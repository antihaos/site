<!DOCTYPE html>
<html lang="ru" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iOS Liquid Glass</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        ios: {
                            dark: '#1c1c1e',
                            card: '#2c2c2e',
                            separator: '#38383a',
                            blue: '#0a84ff',
                            green: '#30d158',
                            indigo: '#5e5ce6',
                            orange: '#ff9f0a',
                            pink: '#ff375f',
                            purple: '#bf5af2',
                            red: '#ff453a',
                            teal: '#64d2ff',
                            yellow: '#ffd60a',
                        }
                    },
                    fontFamily: {
                        'sf': ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif']
                    },
                    backdropBlur: {
                        'liquid': '40px',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: all 0.5s ease;
            overflow-x: hidden;
        }

        /* Liquid Glass эффект для темной темы */
        .dark .liquid-glass {
            background: rgba(30, 30, 30, 0.2);
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                inset 0 -1px 0 rgba(0, 0, 0, 0.1);
        }

        /* Liquid Glass эффект для светлой темы */
        .light .liquid-glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }

        /* Карточки для темной темы */
        .dark .liquid-glass-card {
            background: rgba(40, 40, 40, 0.25);
            backdrop-filter: blur(30px) saturate(180%);
            -webkit-backdrop-filter: blur(30px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow:
                0 10px 25px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.15),
                inset 0 -1px 0 rgba(0, 0, 0, 0.1);
        }

        /* Карточки для светлой темы */
        .light .liquid-glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(30px) saturate(180%);
            -webkit-backdrop-filter: blur(30px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.25);
            box-shadow:
                0 10px 25px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.3),
                inset 0 -1px 0 rgba(0, 0, 0, 0.05);
        }

        /* Космический фон для темной темы */
        .dark .space-bg {
            background:
                radial-gradient(ellipse at center, rgba(12, 20, 69, 0.4) 0%, rgba(0, 0, 0, 0.9) 70%);
        }

        /* Светлый фон для светлой темы */
        .light .space-bg {
            background:
                radial-gradient(ellipse at center, rgba(173, 216, 230, 0.6) 0%, rgba(240, 248, 255, 0.9) 70%);
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-image:
                radial-gradient(2px 2px at 20px 30px, #eee, transparent),
                radial-gradient(2px 2px at 40px 70px, #fff, transparent),
                radial-gradient(1px 1px at 90px 40px, #ddd, transparent),
                radial-gradient(1px 1px at 130px 80px, #fff, transparent),
                radial-gradient(2px 2px at 160px 30px, #eee, transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: stars-animation 120s linear infinite;
        }

        .dark .stars {
            opacity: 1;
        }

        .light .stars {
            opacity: 0.3;
        }

        @keyframes stars-animation {
            from { background-position: 0 0; }
            to { background-position: -1000px 0; }
        }

        .nebula {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background:
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 40%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.2) 0%, transparent 40%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 40%);
            opacity: 0.6;
            animation: nebula-animation 60s ease-in-out infinite alternate;
        }

        .dark .nebula {
            opacity: 0.6;
        }

        .light .nebula {
            opacity: 0.2;
            background:
                radial-gradient(circle at 20% 80%, rgba(173, 216, 230, 0.4) 0%, transparent 40%),
                radial-gradient(circle at 80% 20%, rgba(135, 206, 250, 0.3) 0%, transparent 40%),
                radial-gradient(circle at 40% 40%, rgba(176, 224, 230, 0.3) 0%, transparent 40%);
        }

        @keyframes nebula-animation {
            0% { opacity: 0.4; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); }
            100% { opacity: 0.4; transform: scale(1); }
        }

        /* Эффект нажатия для iOS элементов */
        .ios-press {
            transition: all 0.2s ease;
        }

        .ios-press:active {
            transform: scale(0.97);
            opacity: 0.8;
        }

        /* Анимации для iOS виджетов */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        /* Скрытие элементов */
        .hidden-section {
            display: none;
        }

        /* Анимация переключения секций */
        .section-transition {
            transition: opacity 0.4s ease;
        }

        /* Стили для переключателя темы */
        .theme-toggle {
            position: relative;
            width: 51px;
            height: 31px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 50px;
            transition: background-color 0.3s;
            cursor: pointer;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .theme-toggle.active {
            background-color: rgba(52, 199, 89, 0.7);
        }

        .theme-toggle::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 27px;
            height: 27px;
            background-color: white;
            border-radius: 50%;
            transition: transform 0.3s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .theme-toggle.active::after {
            transform: translateX(20px);
        }

        /* Кастомный скроллбар */
        ::-webkit-scrollbar {
            width: 0;
            background: transparent;
        }

        /* Анимация для планет */
        .planet {
            position: fixed;
            border-radius: 50%;
            z-index: -1;
            animation: float 30s infinite linear;
        }

        .dark .planet {
            opacity: 0.3;
        }

        .light .planet {
            opacity: 0.1;
        }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
            100% { transform: translateY(0) rotate(360deg); }
        }

        /* Анимация для уведомлений */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse-notification {
            animation: pulse 2s infinite;
        }

        /* Цвет текста для светлой темы */
        .light .text-white {
            color: rgba(0, 0, 0, 0.9);
        }

        .light .text-white.text-opacity-70 {
            color: rgba(0, 0, 0, 0.7);
        }

        .light .text-white.text-opacity-50 {
            color: rgba(0, 0, 0, 0.5);
        }

        .light .placeholder-white::placeholder {
            color: rgba(0, 0, 0, 0.5);
        }

        /* Стили для модального окна кодов доступа */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            width: 90%;
            max-width: 400px;
            border-radius: 20px;
            padding: 0;
            overflow: hidden;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        .code-input {
            width: 50px;
            height: 60px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            margin: 0 5px;
        }

        .code-input:focus {
            border-color: #0a84ff;
            outline: none;
            background: rgba(255, 255, 255, 0.15);
        }

        .light .code-input {
            border: 2px solid rgba(0, 0, 0, 0.2);
            color: black;
            background: rgba(0, 0, 0, 0.05);
        }

        .light .code-input:focus {
            border-color: #0a84ff;
            background: rgba(0, 0, 0, 0.1);
        }

        /* Цветные градиенты для иконок */
        .icon-gradient-1 {
            background: linear-gradient(135deg, #ff6b6b, #ffa8a8);
        }

        .icon-gradient-2 {
            background: linear-gradient(135deg, #4ecdc4, #88d3ce);
        }

        .icon-gradient-3 {
            background: linear-gradient(135deg, #45b7d1, #96cfe3);
        }

        .icon-gradient-4 {
            background: linear-gradient(135deg, #f9c74f, #f9e2a8);
        }

        .icon-gradient-5 {
            background: linear-gradient(135deg, #9d4edd, #c77dff);
        }

        .icon-gradient-6 {
            background: linear-gradient(135deg, #f3722c, #f8965b);
        }

        /* Анимация обновления данных */
        @keyframes dataUpdate {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .data-updating {
            animation: dataUpdate 1s ease-in-out;
        }
    </style>
</head>
<body class="font-sf min-h-screen pb-20 text-white dark">
    <!-- Космический фон -->
    <div class="space-bg"></div>
    <div class="stars"></div>
    <div class="nebula"></div>

    <!-- Планеты -->
    <div class="planet w-20 h-20 bg-purple-500 top-1/4 left-10"></div>
    <div class="planet w-12 h-12 bg-blue-400 top-2/3 right-10"></div>
    <div class="planet w-16 h-16 bg-pink-500 bottom-1/4 left-1/4"></div>

    <!-- Модальное окно кодов доступа -->
    <div id="access-codes-modal" class="modal-overlay">
        <div class="modal-content liquid-glass-card">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-semibold">Коды доступа</h2>
                    <button id="close-codes-modal" class="w-8 h-8 rounded-full flex items-center justify-center liquid-glass ios-press">
                        <i class="fas fa-times"></i>
                    </button>
                </div>

                <div class="mb-6">
                    <p class="text-white text-opacity-70 mb-4">Введите 6-значный код доступа:</p>
                    <div class="flex justify-center space-x-2 mb-4">
                        <input type="text" maxlength="1" class="code-input" data-index="0">
                        <input type="text" maxlength="1" class="code-input" data-index="1">
                        <input type="text" maxlength="1" class="code-input" data-index="2">
                        <input type="text" maxlength="1" class="code-input" data-index="3">
                        <input type="text" maxlength="1" class="code-input" data-index="4">
                        <input type="text" maxlength="1" class="code-input" data-index="5">
                    </div>
                    <p id="code-error" class="text-red-400 text-sm text-center hidden">Неверный код доступа</p>
                </div>

                <div class="mb-6">
                    <h3 class="font-medium mb-3">Сохраненные коды:</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between items-center p-3 rounded-xl liquid-glass">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 rounded-full flex items-center justify-center icon-gradient-1">
                                    <i class="fas fa-door-open text-xs"></i>
                                </div>
                                <span>Шлюз 1-A</span>
                            </div>
                            <span class="font-mono">••••••</span>
                        </div>
                        <div class="flex justify-between items-center p-3 rounded-xl liquid-glass">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 rounded-full flex items-center justify-center icon-gradient-2">
                                    <i class="fas fa-server text-xs"></i>
                                </div>
                                <span>Центр управления</span>
                            </div>
                            <span class="font-mono">••••••</span>
                        </div>
                    </div>
                </div>

                <button id="submit-code" class="w-full bg-ios-blue bg-opacity-80 py-3 rounded-xl font-medium liquid-glass ios-press">
                    Проверить код
                </button>
            </div>
        </div>
    </div>

    <!-- Верхний статус бар iOS -->
    <div class="fixed top-0 left-0 right-0 z-50 pt-1 pb-2 px-4 flex justify-between items-center text-sm liquid-glass">
        <div class="text-xs" id="current-time">18:41</div>
        <div class="flex space-x-1">
            <i class="fas fa-signal"></i>
            <i class="fas fa-wifi"></i>
            <i class="fas fa-battery-three-quarters" id="battery-icon"></i>
        </div>
    </div>

    <!-- Секция Главная -->
    <section id="home-section" class="section-transition">
        <main class="pt-8 px-4">
            <!-- Заголовок страницы -->
            <div class="mb-6 fade-in">
                <h1 class="text-2xl font-semibold">Космическая станция</h1>
                <p class="text-white text-opacity-70 text-sm mt-1" id="current-date">Пятница, 15 сентября</p>
            </div>

            <!-- Виджет погоды -->
            <div class="rounded-3xl p-4 mb-4 fade-in ios-press liquid-glass-card" id="weather-widget">
                <div class="flex justify-between items-center">
                    <div>
                        <h2 class="font-medium">Космическая погода</h2>
                        <p class="text-white text-opacity-70 text-sm" id="weather-location">Орбита Земли</p>
                    </div>
                    <div class="text-right">
                        <div class="text-3xl" id="weather-temp">-270°</div>
                        <p class="text-white text-opacity-70 text-sm" id="weather-desc">Вакуум</p>
                    </div>
                </div>
                <div class="mt-2 flex justify-between text-xs text-white text-opacity-70">
                    <span>Солнечный ветер: <span id="solar-wind">450 км/с</span></span>
                    <span>Радиация: <span id="radiation-level">Низкая</span></span>
                </div>
            </div>

            <!-- Виджет календаря -->
            <div class="rounded-3xl p-4 mb-4 fade-in ios-press liquid-glass-card" id="calendar-widget">
                <h2 class="font-medium mb-2">Космическое расписание</h2>
                <div id="calendar-events">
                    <!-- Данные будут загружены из JSON -->
                </div>
            </div>

            <!-- Виджет напоминаний -->
            <div class="rounded-3xl p-4 mb-4 fade-in ios-press liquid-glass-card" id="reminders-widget">
                <h2 class="font-medium mb-2">Космические задачи</h2>
                <div id="reminders-list">
                    <!-- Данные будут загружены из JSON -->
                </div>
                <div class="mt-3 flex">
                    <input type="text" placeholder="Новая задача..." class="flex-1 bg-transparent border border-white border-opacity-20 rounded-xl py-2 px-3 text-sm focus:outline-none focus:border-ios-blue text-white placeholder-white placeholder-opacity-50" id="new-reminder">
                    <button class="ml-2 bg-ios-blue bg-opacity-80 text-white rounded-xl px-3 text-sm liquid-glass ios-press" id="add-reminder">+</button>
                </div>
            </div>

            <!-- Виджет систем станции -->
            <div class="rounded-3xl p-4 mb-4 fade-in ios-press liquid-glass-card" id="systems-widget">
                <h2 class="font-medium mb-2">Системы станции</h2>
                <div class="grid grid-cols-2 gap-2" id="systems-status">
                    <!-- Данные будут загружены из JSON -->
                </div>
                <div class="mt-3 w-full bg-gray-700 rounded-full h-2">
                    <div class="bg-ios-blue h-2 rounded-full" style="width: 75%" id="station-power"></div>
                </div>
                <div class="flex justify-between text-xs mt-1 text-white text-opacity-70">
                    <span>Энергия: <span id="power-level">75%</span></span>
                    <span id="station-time">12 дней до подзарядки</span>
                </div>
            </div>

            <!-- Виджет музыки -->
            <div class="rounded-3xl p-4 mb-4 fade-in ios-press liquid-glass-card" id="music-widget">
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-3">
                        <div class="w-12 h-12 rounded-xl flex items-center justify-center liquid-glass icon-gradient-5">
                            <i class="fas fa-music"></i>
                        </div>
                        <div>
                            <h2 class="font-medium">Космическая музыка</h2>
                            <p class="text-white text-opacity-70 text-sm" id="music-track">Space Oddity - David Bowie</p>
                        </div>
                    </div>
                    <div class="w-10 h-10 rounded-full flex items-center justify-center liquid-glass icon-gradient-3 ios-press" id="play-button">
                        <i class="fas fa-play" id="play-icon"></i>
                    </div>
                </div>
                <div class="mt-3 flex items-center space-x-2">
                    <span class="text-xs text-white text-opacity-70" id="music-time">0:00</span>
                    <div class="flex-1 bg-gray-700 rounded-full h-1">
                        <div class="bg-ios-blue h-1 rounded-full" style="width: 30%" id="music-progress"></div>
                    </div>
                    <span class="text-xs text-white text-opacity-70">3:45</span>
                </div>
            </div>
        </main>
    </section>

    <!-- Секция Поиск -->
    <section id="search-section" class="section-transition hidden-section">
        <main class="pt-8 px-4">
            <div class="mb-6 fade-in">
                <h1 class="text-2xl font-semibold">Космический поиск</h1>
                <div class="mt-4 relative">
                    <input type="text" placeholder="Поиск по станции..." class="w-full rounded-2xl py-3 px-4 pl-10 focus:outline-none liquid-glass-card text-white placeholder-white placeholder-opacity-50" id="search-input">
                    <i class="fas fa-search absolute left-3 top-3.5 text-white text-opacity-50"></i>
                </div>
            </div>

            <div class="rounded-3xl p-4 mb-4 fade-in liquid-glass-card">
                <h2 class="font-medium mb-3">Недавние поиски</h2>
                <div class="space-y-3" id="recent-searches">
                    <!-- Данные будут загружены из JSON -->
                </div>
            </div>

            <div class="rounded-3xl p-4 mb-4 fade-in liquid-glass-card">
                <h2 class="font-medium mb-3">Быстрый доступ</h2>
                <div class="grid grid-cols-2 gap-3" id="quick-access">
                    <!-- Данные будут загружены из JSON -->
                </div>
            </div>
        </main>
    </section>

    <!-- Секция Уведомления -->
    <section id="notifications-section" class="section-transition hidden-section">
        <main class="pt-8 px-4">
            <div class="mb-6 fade-in">
                <h1 class="text-2xl font-semibold">Космические уведомления</h1>
                <div class="flex space-x-2 mt-4">
                    <button class="bg-ios-blue bg-opacity-80 text-white px-4 py-1 rounded-full text-sm liquid-glass active-filter ios-press" data-filter="all">Все</button>
                    <button class="text-white px-4 py-1 rounded-full text-sm liquid-glass ios-press" data-filter="unread">Непрочитанные</button>
                    <button class="text-white px-4 py-1 rounded-full text-sm liquid-glass ios-press" data-filter="system">Системные</button>
                </div>
            </div>

            <div class="space-y-4" id="notifications-container">
                <!-- Данные будут загружены из JSON -->
            </div>
        </main>
    </section>

    <!-- Секция Настройки -->
    <section id="settings-section" class="section-transition hidden-section">
        <main class="pt-8 px-4">
            <div class="mb-6 fade-in">
                <h1 class="text-2xl font-semibold">Настройки станции</h1>
            </div>

            <div class="space-y-4" id="settings-container">
                <!-- Данные будут загружены из JSON -->
            </div>
        </main>
    </section>

    <!-- Фиксированная нижняя панель навигации -->
    <div class="fixed bottom-0 left-0 right-0 py-2 px-6 flex justify-between items-center liquid-glass">
        <a href="#" class="nav-btn flex flex-col items-center text-ios-blue ios-press" data-section="home-section">
            <i class="fas fa-home text-lg mb-1"></i>
            <span class="text-xs">Главная</span>
        </a>
        <a href="#" class="nav-btn flex flex-col items-center text-white text-opacity-70 ios-press" data-section="search-section">
            <i class="fas fa-search text-lg mb-1"></i>
            <span class="text-xs">Поиск</span>
        </a>
        <a href="#" class="nav-btn flex flex-col items-center text-white text-opacity-70 ios-press" data-section="notifications-section">
            <i class="fas fa-bell text-lg mb-1"></i>
            <span class="text-xs">Уведомления</span>
        </a>
        <a href="#" class="nav-btn flex flex-col items-center text-white text-opacity-70 ios-press" data-section="settings-section">
            <i class="fas fa-cog text-lg mb-1"></i>
            <span class="text-xs">Настройки</span>
        </a>
    </div>

    <script>
        // JSON структуры данных для виджетов
        const appData = {
            weather: {
                location: "Орбита Земли",
                temperature: "-270°",
                description: "Вакуум",
                solarWind: "450 км/с",
                radiation: "Низкая",
                updateTime: "2 мин назад"
            },
            calendar: {
                events: [
                    {
                        id: 1,
                        title: "Выход в открытый космос",
                        date: "15",
                        time: "10:00 - 11:30",
                        icon: "icon-gradient-1"
                    },
                    {
                        id: 2,
                        title: "Коррекция орбиты",
                        date: "16",
                        time: "14:20 - 15:00",
                        icon: "icon-gradient-2"
                    }
                ]
            },
            reminders: {
                tasks: [
                    {
                        id: 1,
                        text: "Проверить системы жизнеобеспечения",
                        completed: false
                    },
                    {
                        id: 2,
                        text: "Калибровка навигационных приборов",
                        completed: false
                    },
                    {
                        id: 3,
                        text: "Связь с ЦУП",
                        completed: false
                    }
                ]
            },
            systems: {
                status: [
                    { name: "Кислород", status: "normal" },
                    { name: "Энергия", status: "normal" },
                    { name: "Связь", status: "warning" },
                    { name: "Температура", status: "normal" }
                ],
                power: {
                    level: 75,
                    timeToRecharge: "12 дней"
                }
            },
            music: {
                currentTrack: "Space Oddity - David Bowie",
                isPlaying: false,
                progress: 30,
                duration: "3:45"
            },
            search: {
                recent: [
                    { id: 1, text: "Системы навигации", icon: "icon-gradient-3" },
                    { id: 2, text: "Системы жизнеобеспечения", icon: "icon-gradient-2" },
                    { id: 3, text: "Связь с Землей", icon: "icon-gradient-6" }
                ],
                quickAccess: [
                    { id: 1, name: "Главная", icon: "icon-gradient-1", section: "home-section" },
                    { id: 2, name: "Уведомления", icon: "icon-gradient-4", section: "notifications-section" },
                    { id: 3, name: "Настройки", icon: "icon-gradient-3", section: "settings-section" },
                    { id: 4, name: "Авария", icon: "icon-gradient-6", section: "emergency" }
                ]
            },
            notifications: {
                items: [
                    {
                        id: 1,
                        type: "system",
                        title: "Связь с ЦУП",
                        message: "Установлена устойчивая связь",
                        time: "2 мин назад",
                        icon: "icon-gradient-3",
                        unread: true
                    },
                    {
                        id: 2,
                        type: "reminder",
                        title: "Задача выполнена",
                        message: "Проверить системы выполнено",
                        time: "10 мин назад",
                        icon: "icon-gradient-2",
                        unread: false
                    }
                ]
            },
            settings: {
                sections: [
                    {
                        title: "Основные системы",
                        items: [
                            {
                                id: 1,
                                name: "Связь с Землей",
                                value: "Активна",
                                icon: "icon-gradient-3",
                                type: "toggle"
                            },
                            {
                                id: 2,
                                name: "Внутренняя связь",
                                value: "Вкл.",
                                icon: "icon-gradient-2",
                                type: "toggle"
                            },
                            {
                                id: 3,
                                name: "Тема интерфейса",
                                value: "Космос",
                                icon: "icon-gradient-4",
                                type: "theme"
                            }
                        ]
                    }
                ]
            }
        };

        // Функции для работы с JSON данными
        const DataManager = {
            // Обновление данных виджета с анимацией
            updateWidget(widgetId, data) {
                const widget = document.getElementById(widgetId);
                if (widget) {
                    widget.classList.add('data-updating');
                    setTimeout(() => {
                        widget.classList.remove('data-updating');
                    }, 1000);
                }
                return data;
            },

            // Загрузка данных погоды
            loadWeatherData() {
                const weather = this.updateWidget('weather-widget', appData.weather);
                document.getElementById('weather-location').textContent = weather.location;
                document.getElementById('weather-temp').textContent = weather.temperature;
                document.getElementById('weather-desc').textContent = weather.description;
                document.getElementById('solar-wind').textContent = weather.solarWind;
                document.getElementById('radiation-level').textContent = weather.radiation;
            },

            // Загрузка данных календаря
            loadCalendarData() {
                const calendar = this.updateWidget('calendar-widget', appData.calendar);
                const container = document.getElementById('calendar-events');
                container.innerHTML = '';

                calendar.events.forEach(event => {
                    const eventElement = document.createElement('div');
                    eventElement.className = 'flex items-center space-x-3 mt-2';
                    eventElement.innerHTML = `
                        <div class="w-10 h-10 rounded-full flex items-center justify-center liquid-glass ${event.icon}">
                            <span class="text-xs font-medium">${event.date}</span>
                        </div>
                        <div>
                            <p class="font-medium">${event.title}</p>
                            <p class="text-white text-opacity-70 text-sm">${event.time}</p>
                        </div>
                    `;
                    container.appendChild(eventElement);
                });
            },

            // Загрузка данных напоминаний
            loadRemindersData() {
                const reminders = this.updateWidget('reminders-widget', appData.reminders);
                const container = document.getElementById('reminders-list');
                container.innerHTML = '';

                reminders.tasks.forEach(task => {
                    const taskElement = document.createElement('div');
                    taskElement.className = 'flex items-center space-x-3 mt-2';
                    taskElement.innerHTML = `
                        <div class="w-5 h-5 rounded-full border border-white border-opacity-30 flex items-center justify-center reminder-checkbox liquid-glass" data-id="${task.id}">
                            <div class="w-3 h-3 rounded-full bg-ios-blue bg-opacity-80 ${task.completed ? '' : 'hidden'}"></div>
                        </div>
                        <p class="${task.completed ? 'opacity-50 line-through' : ''}">${task.text}</p>
                    `;
                    container.appendChild(taskElement);
                });

                // Добавляем обработчики для чекбоксов
                this.initReminderCheckboxes();
            },

            // Загрузка данных систем
            loadSystemsData() {
                const systems = this.updateWidget('systems-widget', appData.systems);
                const container = document.getElementById('systems-status');
                container.innerHTML = '';

                systems.status.forEach(system => {
                    const statusColor = system.status === 'normal' ? 'bg-ios-green' :
                                      system.status === 'warning' ? 'bg-ios-orange' : 'bg-ios-red';

                    const systemElement = document.createElement('div');
                    systemElement.className = 'flex items-center space-x-2';
                    systemElement.innerHTML = `
                        <div class="w-3 h-3 rounded-full ${statusColor}"></div>
                        <span class="text-sm">${system.name}</span>
                    `;
                    container.appendChild(systemElement);
                });

                document.getElementById('power-level').textContent = systems.power.level + '%';
                document.getElementById('station-power').style.width = systems.power.level + '%';
                document.getElementById('station-time').textContent = systems.power.timeToRecharge + ' до подзарядки';
            },

            // Загрузка данных музыки
            loadMusicData() {
                const music = this.updateWidget('music-widget', appData.music);
                document.getElementById('music-track').textContent = music.currentTrack;
                document.getElementById('music-progress').style.width = music.progress + '%';

                const currentTime = Math.floor(music.progress * 3.45 / 100);
                document.getElementById('music-time').textContent = '0:' + (currentTime < 10 ? '0' + currentTime : currentTime);
            },

            // Загрузка данных поиска
            loadSearchData() {
                const search = appData.search;

                // Недавние поиски
                const recentContainer = document.getElementById('recent-searches');
                recentContainer.innerHTML = '';
                search.recent.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'flex items-center space-x-3 ios-press';
                    itemElement.setAttribute('data-search', item.text.toLowerCase());
                    itemElement.innerHTML = `
                        <div class="w-8 h-8 rounded-full flex items-center justify-center liquid-glass ${item.icon}">
                            <i class="fas fa-clock text-xs"></i>
                        </div>
                        <p>${item.text}</p>
                    `;
                    recentContainer.appendChild(itemElement);
                });

                // Быстрый доступ
                const quickAccessContainer = document.getElementById('quick-access');
                quickAccessContainer.innerHTML = '';
                search.quickAccess.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'rounded-2xl p-3 text-center ios-press liquid-glass';
                    if (item.section !== 'emergency') {
                        itemElement.setAttribute('data-section', item.section);
                    } else {
                        itemElement.id = 'emergency-btn';
                    }
                    itemElement.innerHTML = `
                        <div class="w-10 h-10 rounded-xl flex items-center justify-center mx-auto mb-2 liquid-glass ${item.icon}">
                            <i class="fas ${item.section === 'emergency' ? 'fa-exclamation-triangle' :
                                          item.section === 'home-section' ? 'fa-home' :
                                          item.section === 'notifications-section' ? 'fa-bell' : 'fa-cog'}"></i>
                        </div>
                        <p class="text-xs">${item.name}</p>
                    `;
                    quickAccessContainer.appendChild(itemElement);
                });
            },

            // Загрузка данных уведомлений
            loadNotificationsData() {
                const notifications = this.updateWidget('notifications-container', appData.notifications);
                const container = document.getElementById('notifications-container');
                container.innerHTML = '';

                notifications.items.forEach(notification => {
                    const notificationElement = document.createElement('div');
                    notificationElement.className = `rounded-3xl p-4 fade-in ios-press liquid-glass-card notification-item`;
                    notificationElement.setAttribute('data-type', notification.type);
                    notificationElement.innerHTML = `
                        <div class="flex justify-between items-start">
                            <div class="flex space-x-3">
                                <div class="w-10 h-10 rounded-full flex items-center justify-center liquid-glass ${notification.icon}">
                                    <i class="fas ${notification.type === 'system' ? 'fa-satellite-dish' :
                                                  notification.type === 'reminder' ? 'fa-check-circle' :
                                                  notification.type === 'alert' ? 'fa-radiation' : 'fa-solar-panel'}"></i>
                                </div>
                                <div>
                                    <h3 class="font-medium">${notification.title}</h3>
                                    <p class="text-white text-opacity-70 text-sm">${notification.message}</p>
                                    <p class="text-white text-opacity-50 text-xs mt-1">${notification.time}</p>
                                </div>
                            </div>
                            ${notification.unread ? '<div class="w-2 h-2 bg-ios-blue rounded-full pulse-notification"></div>' : ''}
                        </div>
                    `;
                    container.appendChild(notificationElement);
                });
            },

            // Загрузка данных настроек
            loadSettingsData() {
                const settings = appData.settings;
                const container = document.getElementById('settings-container');
                container.innerHTML = '';

                settings.sections.forEach(section => {
                    const sectionElement = document.createElement('div');
                    sectionElement.className = 'rounded-3xl p-4 fade-in liquid-glass-card';
                    sectionElement.innerHTML = `
                        <h2 class="font-medium mb-3">${section.title}</h2>
                        <div class="space-y-3">
                            ${section.items.map(item => `
                                <div class="flex justify-between items-center ios-press ${item.type === 'toggle' ? 'toggle-setting' : ''}"
                                     data-id="${item.id}" data-type="${item.type}">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 rounded-full flex items-center justify-center liquid-glass ${item.icon}">
                                            <i class="fas ${item.name.includes('Связь') ? 'fa-wifi' :
                                                          item.name.includes('Экипаж') ? 'fa-user-astronaut' :
                                                          item.name.includes('Коды') ? 'fa-key' :
                                                          item.name.includes('Музыка') ? 'fa-music' :
                                                          item.name.includes('Навигация') ? 'fa-map-marked-alt' :
                                                          item.name.includes('Траектория') ? 'fa-rocket' : 'fa-moon'}"></i>
                                        </div>
                                        <p>${item.name}</p>
                                    </div>
                                    ${item.type === 'theme' ?
                                        `<div class="flex items-center space-x-2">
                                            <span class="text-white text-opacity-70 text-sm" id="theme-status">${item.value}</span>
                                            <div class="theme-toggle active" id="theme-toggle"></div>
                                        </div>` :
                                        item.type === 'toggle' ?
                                        `<p class="text-white text-opacity-70" id="setting-${item.id}">${item.value}</p>` :
                                        `<i class="fas fa-chevron-right text-white text-opacity-50"></i>`
                                    }
                                </div>
                            `).join('')}
                        </div>
                    `;
                    container.appendChild(sectionElement);
                });
            },

            // Инициализация чекбоксов напоминаний
            initReminderCheckboxes() {
                const checkboxes = document.querySelectorAll('.reminder-checkbox');
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('click', function() {
                        const taskId = parseInt(this.getAttribute('data-id'));
                        const task = appData.reminders.tasks.find(t => t.id === taskId);
                        if (task) {
                            task.completed = !task.completed;
                            this.loadRemindersData();
                        }
                    }.bind(this));
                });
            },

            // Инициализация всех данных
            initAllData() {
                this.loadWeatherData();
                this.loadCalendarData();
                this.loadRemindersData();
                this.loadSystemsData();
                this.loadMusicData();
                this.loadSearchData();
                this.loadNotificationsData();
                this.loadSettingsData();
            }
        };

        // Обновление времени и даты
        function updateDateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });
            const dateString = now.toLocaleDateString('ru-RU', {
                weekday: 'long',
                day: 'numeric',
                month: 'long'
            });

            document.getElementById('current-time').textContent = timeString;
            document.getElementById('current-date').textContent = dateString.charAt(0).toUpperCase() + dateString.slice(1);
        }

        // Функция переключения темы
        function toggleTheme() {
            const html = document.documentElement;
            const themeToggle = document.getElementById('theme-toggle');
            const themeStatus = document.getElementById('theme-status');

            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                html.classList.add('light');
                if (themeToggle) themeToggle.classList.remove('active');
                if (themeStatus) themeStatus.textContent = 'Светлая';
                localStorage.setItem('theme', 'light');
            } else {
                html.classList.remove('light');
                html.classList.add('dark');
                if (themeToggle) themeToggle.classList.add('active');
                if (themeStatus) themeStatus.textContent = 'Космос';
                localStorage.setItem('theme', 'dark');
            }
        }

        // Инициализация темы из localStorage
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            const themeToggle = document.getElementById('theme-toggle');
            const themeStatus = document.getElementById('theme-status');
            const html = document.documentElement;

            if (savedTheme === 'light') {
                html.classList.remove('dark');
                html.classList.add('light');
                if (themeToggle) themeToggle.classList.remove('active');
                if (themeStatus) themeStatus.textContent = 'Светлая';
            } else {
                html.classList.remove('light');
                html.classList.add('dark');
                if (themeToggle) themeToggle.classList.add('active');
                if (themeStatus) themeStatus.textContent = 'Космос';
            }
        }

        // Функционал кодов доступа
        function initAccessCodes() {
            const modal = document.getElementById('access-codes-modal');
            const openBtn = document.getElementById('access-codes-btn');
            const closeBtn = document.getElementById('close-codes-modal');
            const submitBtn = document.getElementById('submit-code');
            const codeInputs = document.querySelectorAll('.code-input');
            const errorMsg = document.getElementById('code-error');

            // Правильный код доступа
            const correctCode = '123456';

            // Функция открытия модального окна
            function openModal() {
                modal.classList.add('active');
                if (codeInputs[0]) codeInputs[0].focus();
            }

            // Функция закрытия модального окна
            function closeModal() {
                modal.classList.remove('active');
                resetCodeInputs();
            }

            // Открытие модального окна
            if (openBtn) {
                openBtn.addEventListener('click', openModal);
            }

            // Закрытие модального окна по крестику
            if (closeBtn) {
                closeBtn.addEventListener('click', closeModal);
            }

            // Закрытие по клику на overlay
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        closeModal();
                    }
                });
            }

            // Закрытие по Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal && modal.classList.contains('active')) {
                    closeModal();
                }
            });

            // Обработка ввода кода
            codeInputs.forEach((input, index) => {
                input.addEventListener('input', function() {
                    if (errorMsg) errorMsg.classList.add('hidden');

                    // Автопереход к следующему полю
                    if (this.value.length === 1 && index < codeInputs.length - 1) {
                        codeInputs[index + 1].focus();
                    }
                });

                // Обработка Backspace
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace' && this.value.length === 0 && index > 0) {
                        codeInputs[index - 1].focus();
                    }
                });
            });

            // Проверка кода
            if (submitBtn) {
                submitBtn.addEventListener('click', function() {
                    const enteredCode = Array.from(codeInputs).map(input => input.value).join('');

                    if (enteredCode === correctCode) {
                        alert('Код доступа принят! Доступ разрешен.');
                        closeModal();
                    } else {
                        if (errorMsg) errorMsg.classList.remove('hidden');
                        resetCodeInputs();
                        if (codeInputs[0]) codeInputs[0].focus();
                    }
                });
            }

            // Сброс полей ввода
            function resetCodeInputs() {
                codeInputs.forEach(input => {
                    input.value = '';
                });
                if (errorMsg) errorMsg.classList.add('hidden');
            }
        }

        // Навигация между секциями
        document.addEventListener('DOMContentLoaded', function() {
            // Инициализация темы
            initTheme();

            // Инициализация данных
            DataManager.initAllData();

            // Инициализация кодов доступа
            initAccessCodes();

            const navButtons = document.querySelectorAll('.nav-btn');
            const sections = document.querySelectorAll('section');

            // Функция переключения секций
            function switchSection(sectionId) {
                // Скрыть все секции
                sections.forEach(section => {
                    section.classList.add('hidden-section');
                    section.style.opacity = '0';
                });

                // Показать выбранную секцию
                const activeSection = document.getElementById(sectionId);
                if (activeSection) {
                    activeSection.classList.remove('hidden-section');
                    setTimeout(() => {
                        activeSection.style.opacity = '1';
                    }, 10);
                }

                // Обновить активную кнопку в навигации
                navButtons.forEach(btn => {
                    const btnSection = btn.getAttribute('data-section');
                    if (btnSection === sectionId) {
                        btn.classList.remove('text-white', 'text-opacity-70');
                        btn.classList.add('text-ios-blue');
                    } else {
                        btn.classList.remove('text-ios-blue');
                        btn.classList.add('text-white', 'text-opacity-70');
                    }
                });
            }

            // Обработчики для кнопок навигации
            navButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const sectionId = this.getAttribute('data-section');
                    switchSection(sectionId);
                });
            });

            // Обработчик для переключателя темы
            document.addEventListener('click', function(e) {
                if (e.target.closest('#theme-toggle')) {
                    toggleTheme();
                }
            });

            // Эффект нажатия для всех элементов с классом ios-press
            const pressElements = document.querySelectorAll('.ios-press');

            pressElements.forEach(element => {
                element.addEventListener('touchstart', function() {
                    this.classList.add('opacity-80', 'scale-95');
                });

                element.addEventListener('touchend', function() {
                    this.classList.remove('opacity-80', 'scale-95');
                });

                element.addEventListener('mousedown', function() {
                    this.classList.add('opacity-80', 'scale-95');
                });

                element.addEventListener('mouseup', function() {
                    this.classList.remove('opacity-80', 'scale-95');
                });

                element.addEventListener('mouseleave', function() {
                    this.classList.remove('opacity-80', 'scale-95');
                });
            });

            // Функциональность кнопки воспроизведения музыки
            const playButton = document.getElementById('play-button');
            let isPlaying = false;
            let musicProgress = 0;
            let musicInterval;

            if (playButton) {
                playButton.addEventListener('click', function() {
                    const icon = document.getElementById('play-icon');
                    if (isPlaying) {
                        icon.classList.remove('fa-pause');
                        icon.classList.add('fa-play');
                        clearInterval(musicInterval);
                        appData.music.isPlaying = false;
                    } else {
                        icon.classList.remove('fa-play');
                        icon.classList.add('fa-pause');
                        appData.music.isPlaying = true;
                        // Запуск прогресса музыки
                        musicInterval = setInterval(() => {
                            musicProgress += 0.5;
                            if (musicProgress > 100) musicProgress = 0;
                            document.getElementById('music-progress').style.width = musicProgress + '%';
                            appData.music.progress = musicProgress;

                            // Обновление времени
                            const currentTime = Math.floor(musicProgress * 2.25 / 100);
                            document.getElementById('music-time').textContent = '0:' + (currentTime < 10 ? '0' + currentTime : currentTime);
                        }, 1000);
                    }
                    isPlaying = !isPlaying;
                });
            }

            // Добавление новых напоминаний
            const addReminderBtn = document.getElementById('add-reminder');
            const newReminderInput = document.getElementById('new-reminder');

            if (addReminderBtn && newReminderInput) {
                addReminderBtn.addEventListener('click', function() {
                    const text = newReminderInput.value.trim();
                    if (text) {
                        const newReminder = {
                            id: Date.now(),
                            text: text,
                            completed: false
                        };
                        appData.reminders.tasks.push(newReminder);
                        DataManager.loadRemindersData();
                        newReminderInput.value = '';
                    }
                });

                newReminderInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        addReminderBtn.click();
                    }
                });
            }

            // Фильтрация уведомлений
            const filterButtons = document.querySelectorAll('[data-filter]');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');

                    // Обновляем активную кнопку
                    filterButtons.forEach(btn => btn.classList.remove('active-filter', 'bg-ios-blue', 'bg-opacity-80'));
                    this.classList.add('active-filter', 'bg-ios-blue', 'bg-opacity-80');

                    // Фильтруем уведомления
                    const notifications = document.querySelectorAll('.notification-item');
                    notifications.forEach(notification => {
                        if (filter === 'all') {
                            notification.style.display = 'block';
                        } else if (filter === 'unread') {
                            notification.style.display = notification.querySelector('.pulse-notification') ? 'block' : 'none';
                        } else {
                            notification.style.display = notification.getAttribute('data-type') === filter ? 'block' : 'none';
                        }
                    });
                });
            });

            // Быстрый доступ из поиска
            document.addEventListener('click', function(e) {
                if (e.target.closest('[data-section]')) {
                    const element = e.target.closest('[data-section]');
                    const sectionId = element.getAttribute('data-section');
                    if (sectionId && sectionId !== 'emergency') {
                        switchSection(sectionId);
                    }
                }
            });

            // Кнопка аварии
            document.addEventListener('click', function(e) {
                if (e.target.closest('#emergency-btn')) {
                    alert('АВАРИЙНЫЙ РЕЖИМ АКТИВИРОВАН!\n\nВсе системы переведены в режим повышенной готовности. Связь с ЦУП установлена.');

                    // Добавляем аварийное уведомление
                    const emergencyNotification = {
                        id: Date.now(),
                        type: "alert",
                        title: "АВАРИЙНЫЙ РЕЖИМ",
                        message: "Активирован аварийный протокол",
                        time: "Только что",
                        icon: "icon-gradient-6",
                        unread: true
                    };

                    appData.notifications.items.unshift(emergencyNotification);
                    DataManager.loadNotificationsData();

                    switchSection('notifications-section');
                }
            });

            // Поиск
            const searchInput = document.getElementById('search-input');
            const searchItems = document.querySelectorAll('[data-search]');

            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const searchText = this.value.toLowerCase();

                    searchItems.forEach(item => {
                        const searchData = item.getAttribute('data-search').toLowerCase();
                        if (searchData.includes(searchText)) {
                            item.style.display = 'flex';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            }

            // Переключение настроек
            document.addEventListener('click', function(e) {
                if (e.target.closest('.toggle-setting')) {
                    const element = e.target.closest('.toggle-setting');
                    const settingId = element.getAttribute('data-id');
                    const statusElement = document.getElementById(`setting-${settingId}`);

                    if (statusElement) {
                        if (statusElement.textContent === 'Активна' || statusElement.textContent === 'Вкл.') {
                            statusElement.textContent = statusElement.textContent === 'Активна' ? 'Отключена' : 'Выкл.';
                        } else {
                            statusElement.textContent = statusElement.textContent === 'Отключена' ? 'Активна' : 'Вкл.';
                        }
                    }
                }
            });

            // Имитация загрузки контента
            setTimeout(() => {
                const fadeElements = document.querySelectorAll('.fade-in');
                fadeElements.forEach(el => {
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                });
            }, 100);

            // Обновление времени
            setInterval(updateDateTime, 60000);
        });
    </script>
</body>
</html>